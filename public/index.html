<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Mining Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet.js for maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-gray-800 border-b border-gray-700 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between h-14">
                <div class="flex items-center space-x-4">
                    <span class="text-orange-500 font-bold text-lg cursor-pointer" onclick="navigate('dashboard')">BTC Mining Tracker</span>
                    <div class="flex space-x-1">
                        <button onclick="navigate('dashboard')" class="nav-btn" data-page="dashboard">Dashboard</button>
                        <button onclick="navigate('companies')" class="nav-btn" data-page="companies">Companies</button>
                        <button onclick="navigate('sites')" class="nav-btn" data-page="sites">Sites</button>
                        <button onclick="navigate('map')" class="nav-btn" data-page="map">Map</button>
                        <button onclick="navigate('news')" class="nav-btn" data-page="news">News</button>
                        <button onclick="navigate('review')" class="nav-btn" data-page="review">Review Queue</button>
                        <button onclick="navigate('valuation')" class="nav-btn" data-page="valuation">Valuation</button>
                        <button onclick="navigate('scenario')" class="nav-btn" data-page="scenario">Scenarios</button>
                        <button onclick="navigate('settings')" class="nav-btn" data-page="settings">Settings</button>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <!-- Global Search -->
                    <div class="relative">
                        <input type="text"
                               id="global-search"
                               placeholder="Search... (Ctrl+K)"
                               class="bg-gray-700 border border-gray-600 rounded px-3 py-1 text-sm w-48 focus:w-64 transition-all focus:outline-none focus:border-orange-500"
                               onkeyup="handleSearch(event)"
                               onfocus="showSearchResults()"
                               onblur="setTimeout(hideSearchResults, 200)">
                        <div id="search-results" class="hidden absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-700 rounded-lg shadow-xl max-h-96 overflow-y-auto z-50">
                        </div>
                    </div>
                    <span id="pending-badge" class="hidden bg-red-600 text-white text-xs px-2 py-1 rounded-full cursor-pointer" onclick="navigate('review')"></span>
                    <div class="flex items-center space-x-1">
                        <button onclick="showImportModal()" class="text-gray-400 hover:text-white text-sm" title="Import CSV">Import</button>
                        <span class="text-gray-600">|</span>
                        <button onclick="exportData('all')" class="text-gray-400 hover:text-white text-sm">Export</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Keyboard shortcuts help -->
    <div id="shortcuts-help" class="hidden fixed bottom-4 left-4 bg-gray-800 border border-gray-700 rounded-lg p-3 text-xs z-40">
        <div class="font-medium mb-2">Keyboard Shortcuts</div>
        <div class="space-y-1 text-gray-400">
            <div><kbd class="kbd">Ctrl+K</kbd> Search</div>
            <div><kbd class="kbd">Ctrl+N</kbd> New entry</div>
            <div><kbd class="kbd">Esc</kbd> Close modal</div>
            <div><kbd class="kbd">?</kbd> Toggle help</div>
        </div>
    </div>

    <!-- Main Content -->
    <main id="app" class="max-w-7xl mx-auto px-4 py-6">
        <!-- Content loaded dynamically -->
    </main>

    <!-- Modal -->
    <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div id="modal-content"></div>
        </div>
    </div>

    <!-- Toast notifications -->
    <div id="toasts" class="fixed bottom-4 right-4 space-y-2 z-50"></div>

    <!-- Scripts -->
    <script src="/js/api.js"></script>
    <script src="/js/valuation.js"></script>
    <script src="/js/app.js"></script>
    <script src="/js/charts.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/import.js"></script>
    <script src="/js/scenario.js"></script>
    <script src="/js/map.js"></script>
</body>
</html>
